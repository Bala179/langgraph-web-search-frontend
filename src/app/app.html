<div class="container-sm">
  <h1>Web search assisted OpenAI chatbot</h1>
  @if (errorOccurred) {
    <div class="alert alert-danger d-flex align-items-center" role="alert">
      <div>
        Error connecting to the server, please try again later.
      </div>
    </div>
  }
  <div class="bg-info-subtle rounded-2 p-4">
    @for(message of messageList; track $index) {
      <!-- Display only the last 5 messages -->
      @if(messageList.length - $index <= 5) {
        <app-message [content]="message.content" [sentByUser]="message.sentByUser" [loaded]="message.loaded"></app-message>
      }
    }
  </div>
  <div class="p-4">
    <form class="row" [formGroup]="newMessageForm" (submit)="sendMessage()">
    <div class="col-sm-10">
      <textarea class="form-control" id="userMessageTextArea" placeholder="Type a message..." rows="1" formControlName="newMessage"
        (keyup.enter)="sendMessage()"></textarea>
    </div>
    <div class="col-sm-2">
      <button type="submit" class="btn btn-primary mb-3">Send</button>
    </div>
  </form>
  </div>
</div>